import{Q as n}from"./vm-qSUGPvtL.js";import{Q as i}from"./QInput-CNi2zBEZ.js";import{Q as g}from"./QBtn-nCgHYuWN.js";import{Q as C}from"./QCard-Dri9TERK.js";import{Q as B,a as _}from"./QTabs-BC3pXEG1.js";import{d as S,r as m,u as T,a as W,b as f,e as a,f as l,F as H,g as N,w as o,T as I,o as V,n as q,t as F,h as Q,i as $,l as w,s as L}from"./index-Mo4dBhOw.js";import{A as R}from"./auth.service-BOxIUbgp.js";import"./render-DXJ7UJne.js";import"./uid-Bzmka5Fh.js";import"./use-dark-mFa0dIct.js";import"./focus-manager-zjdVGI5d.js";import"./use-timeout-HZbuKFz0.js";import"./rtl-DFPa-2ov.js";const P={class:"flex flex-center items=center bg-blue-1",id:"container"},j={class:"background"},D={class:"marquee-content"},E={class:"input-auth"},G={class:"inp-mail"},J={class:"inp-pass"},K={class:"auth-btn"},M={class:"newReg"},O={key:0,class:"input-auth"},X={class:"inp-first-name"},Y={class:"inp-last-name"},Z={class:"inp-group"},ee={class:"inp-mail"},te={class:"inp-pass"},le={class:"retry-pass"},ae={class:"auth-btn"},se={class:"newReg"},oe={key:1,class:"input-auth"},ie={class:"inp-first-name"},ne={class:"inp-last-name"},ue={class:"inp-mail"},re={class:"inp-pass"},de={class:"retry-pass"},pe={class:"auth-btn"},me={class:"newReg"},ve={key:2,class:"input-auth"},ye={class:"inp-first-name"},be={class:"inp-last-name"},ce={class:"inp-mail"},Ve={class:"inp-pass"},fe={class:"retry-pass"},we={class:"auth-btn"},xe={class:"newReg"},Se=S({__name:"UserAuth",setup(ge){const k=W(),d=m(""),u=m(""),v=m(""),y=m(""),x=m(""),b=m(""),s=m(!0),r=m(!0),c=m("student"),z=["ITrialto ".repeat(20),"ITrialto ".repeat(20),"ITrialto ".repeat(20),"ITrialto ".repeat(20),"ITrialto ".repeat(20),"ITrialto ".repeat(20),"ITrialto ".repeat(20),"ITrialto ".repeat(20),"ITrialto ".repeat(20),"ITrialto ".repeat(20)];T().getIsAuth&&k.push({name:"Home"});const h=async()=>{try{if(u.value!==b.value){w.error("Пароли не совпадают");return}c.value!="student"&&(x.value=""),await R.registration({firstname:v.value,lastname:y.value,group:x.value,mail:d.value,password:u.value,role:c.value})?(w.success("Аккаунт создан"),d.value="",u.value="",r.value=!r.value):w.error("Что-то пошло не так")}catch(p){const e=p.response?.data.message;w.error(e)}},A=async()=>{try{const p=await R.login({mail:d.value,password:u.value});p&&(L("token",p.token),T().login(p),await k.push({name:"projects",params:{rialtoId:4}}))}catch(p){const e=p.response?.data.message;w.error(e)}};return(p,e)=>(V(),f("div",P,[a("div",j,[(V(),f(H,null,N(z,(t,U)=>a("div",{class:q(["marquee",{reverse:U%2!==0}]),key:U},[a("span",D,F(t.toUpperCase()),1)],2)),64))]),l(I,{appear:"",name:"slide",mode:"out-in"},{default:o(()=>[r.value?(V(),Q(C,{key:0,flat:"",class:"auth-card"},{default:o(()=>[e[30]||(e[30]=a("h4",{class:"text-center text-uppercase text-bold"},"Вход",-1)),a("div",E,[a("div",G,[l(i,{standout:"bg-primary text-white",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),type:"email",placeholder:"Почта",rules:[t=>t.includes(".")&&t.includes("@")||"Введите почту"],"lazy-rules":""},{before:o(()=>[l(n,{name:"mail"})]),_:1},8,["modelValue","rules"])]),a("div",J,[l(i,{standout:"bg-primary text-white",modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value=t),type:s.value?"password":"text",placeholder:"Пароль"},{before:o(()=>[l(n,{name:"password"})]),append:o(()=>[l(n,{name:s.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=t=>s.value=!s.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),a("div",K,[l(g,{unelevated:"",color:"primary",label:"Войти","text-color":"white",padding:"10px 50%",onClick:A})]),a("div",M,[a("button",{class:"newReg-btn",type:"button",onClick:e[3]||(e[3]=t=>r.value=!r.value)},"Создать новый аккаунт")])])]),_:1})):r.value==!1?(V(),Q(C,{key:1,flat:"",class:"auth-card"},{default:o(()=>[e[31]||(e[31]=a("h4",{class:"text-center text-uppercase text-bold"},"Регистрация",-1)),l(B,{class:"text-primary",modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=t=>c.value=t)},{default:o(()=>[l(_,{name:"parther",label:"Партнер"}),l(_,{name:"student",label:"Студент"}),l(_,{name:"teacher",label:"Преподаватель"})]),_:1},8,["modelValue"]),l(I,{appear:"",name:"fade",mode:"out-in"},{default:o(()=>[c.value==="student"?(V(),f("div",O,[a("div",X,[l(i,{standout:"bg-primary text-white",modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=t=>v.value=t),type:"text",placeholder:"Имя"},null,8,["modelValue"])]),a("div",Y,[l(i,{standout:"bg-primary text-white",modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=t=>y.value=t),type:"text",placeholder:"Фамилия"},null,8,["modelValue"])]),a("div",Z,[l(i,{standout:"bg-primary text-white",modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=t=>x.value=t),type:"text",placeholder:"Группа"},null,8,["modelValue"])]),a("div",ee,[l(i,{standout:"bg-primary text-white",modelValue:d.value,"onUpdate:modelValue":e[8]||(e[8]=t=>d.value=t),type:"email",placeholder:"Почта",rules:[t=>t.endsWith("@std.tyuiu.ru")||"Введите почту ТИУ студента"],"lazy-rules":""},{before:o(()=>[l(n,{name:"mail"})]),_:1},8,["modelValue","rules"])]),a("div",te,[l(i,{standout:"bg-primary text-white",modelValue:u.value,"onUpdate:modelValue":e[10]||(e[10]=t=>u.value=t),type:s.value?"password":"text",placeholder:"Пароль"},{before:o(()=>[l(n,{name:"password"})]),append:o(()=>[l(n,{name:s.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[9]||(e[9]=t=>s.value=!s.value)},null,8,["name"])]),_:1},8,["modelValue","type"]),a("div",le,[l(i,{standout:"bg-primary text-white",modelValue:b.value,"onUpdate:modelValue":e[12]||(e[12]=t=>b.value=t),type:s.value?"password":"text",placeholder:"Повторите пароль"},{append:o(()=>[l(n,{name:s.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[11]||(e[11]=t=>s.value=!s.value)},null,8,["name"])]),_:1},8,["modelValue","type"])])]),a("div",ae,[l(g,{unelevated:"",color:"primary",label:"Создать аккаунт","text-color":"white",padding:"10px 50%","no-wrap":"",onClick:h})]),a("div",se,[a("button",{class:"newReg-btn",type:"button",onClick:e[13]||(e[13]=t=>r.value=!r.value)},"Войти в аккаунт")])])):c.value==="parther"?(V(),f("div",oe,[a("div",ie,[l(i,{standout:"bg-primary text-white",modelValue:v.value,"onUpdate:modelValue":e[14]||(e[14]=t=>v.value=t),type:"text",placeholder:"Имя"},null,8,["modelValue"])]),a("div",ne,[l(i,{standout:"bg-primary text-white",modelValue:y.value,"onUpdate:modelValue":e[15]||(e[15]=t=>y.value=t),type:"text",placeholder:"Фамилия"},null,8,["modelValue"])]),a("div",ue,[l(i,{standout:"bg-primary text-white",modelValue:d.value,"onUpdate:modelValue":e[16]||(e[16]=t=>d.value=t),type:"email",placeholder:"Почта",rules:[t=>t.includes(".")&&t.includes("@")&&!(t.endsWith("@tyuiu.ru")||t.endsWith("@std.tyuiu.ru"))||"Введите корректную почту"],"lazy-rules":""},{before:o(()=>[l(n,{name:"mail"})]),_:1},8,["modelValue","rules"])]),a("div",re,[l(i,{standout:"bg-primary text-white",modelValue:u.value,"onUpdate:modelValue":e[18]||(e[18]=t=>u.value=t),type:s.value?"password":"text",placeholder:"Пароль"},{before:o(()=>[l(n,{name:"password"})]),append:o(()=>[l(n,{name:s.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[17]||(e[17]=t=>s.value=!s.value)},null,8,["name"])]),_:1},8,["modelValue","type"]),a("div",de,[l(i,{standout:"bg-primary text-white",modelValue:b.value,"onUpdate:modelValue":e[20]||(e[20]=t=>b.value=t),type:s.value?"password":"text",placeholder:"Повторите пароль"},{append:o(()=>[l(n,{name:s.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[19]||(e[19]=t=>s.value=!s.value)},null,8,["name"])]),_:1},8,["modelValue","type"])])]),a("div",pe,[l(g,{unelevated:"",color:"primary",label:"Создать аккаунт","text-color":"white",padding:"10px 50%","no-wrap":"",onClick:h})]),a("div",me,[a("button",{class:"newReg-btn",type:"button",onClick:e[21]||(e[21]=t=>r.value=!r.value)},"Войти в аккаунт")])])):c.value==="teacher"?(V(),f("div",ve,[a("div",ye,[l(i,{standout:"bg-primary text-white",modelValue:v.value,"onUpdate:modelValue":e[22]||(e[22]=t=>v.value=t),type:"text",placeholder:"Имя"},null,8,["modelValue"])]),a("div",be,[l(i,{standout:"bg-primary text-white",modelValue:y.value,"onUpdate:modelValue":e[23]||(e[23]=t=>y.value=t),type:"text",placeholder:"Фамилия"},null,8,["modelValue"])]),a("div",ce,[l(i,{standout:"bg-primary text-white",modelValue:d.value,"onUpdate:modelValue":e[24]||(e[24]=t=>d.value=t),type:"email",placeholder:"Почта преподавателя ТИУ",rules:[t=>t.endsWith("@tyuiu.ru")||"Введите почту ТИУ преподавателя"],"lazy-rules":""},{before:o(()=>[l(n,{name:"mail"})]),_:1},8,["modelValue","rules"])]),a("div",Ve,[l(i,{standout:"bg-primary text-white",modelValue:u.value,"onUpdate:modelValue":e[26]||(e[26]=t=>u.value=t),type:s.value?"password":"text",placeholder:"Пароль"},{before:o(()=>[l(n,{name:"password"})]),append:o(()=>[l(n,{name:s.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[25]||(e[25]=t=>s.value=!s.value)},null,8,["name"])]),_:1},8,["modelValue","type"]),a("div",fe,[l(i,{standout:"bg-primary text-white",modelValue:b.value,"onUpdate:modelValue":e[28]||(e[28]=t=>b.value=t),type:s.value?"password":"text",placeholder:"Повторите пароль"},{append:o(()=>[l(n,{name:s.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[27]||(e[27]=t=>s.value=!s.value)},null,8,["name"])]),_:1},8,["modelValue","type"])])]),a("div",we,[l(g,{unelevated:"",color:"primary",label:"Создать аккаунт","text-color":"white",padding:"10px 50%","no-wrap":"",onClick:h})]),a("div",xe,[a("button",{class:"newReg-btn",type:"button",onClick:e[29]||(e[29]=t=>r.value=!r.value)},"Войти в аккаунт")])])):$("",!0)]),_:1})]),_:1})):$("",!0)]),_:1})]))}});export{Se as default};
